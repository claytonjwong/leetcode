/*
 
 867. Prime Palindrome
 
 Q: https://leetcode.com/problems/prime-palindrome/description/
 A: https://leetcode.com/problems/prime-palindrome/discuss/148253/Straightforward-C++-(-EASY-to-understand-)-with-explanation
 
 */

#include <iostream>
#include <cmath>
#include <set>
#include <iomanip>

using namespace std;

class Solution {
public:
    int primePalindrome(int N) {
        if (N<12) return N<=2 ? 2 : N<4 ? 3 : N<6 ? 5 : N<8 ? 7 : 11;
        for (int i=10; i<1000000; ++i){
            string odd=to_string(i),even(odd+odd.back());
            for (int j=int(odd.size())-2; j>=0; --j){
                char c=odd[j];
                odd.push_back(c);
                even.push_back(c);
            }
            int p=stoi(odd),q=stoi(even);
            if (p>=N && isPrime(p))
                return p;
            if (q>=N && isPrime(q))
                return q;
        }
        return -1;
    }
private:
    bool isPrime(int x) {
        for (int i=2,M=(int)sqrt(x); i<=M; ++i)
            if (x%i==0)
                return false;
        return true;
    }
};


/*
class Solution {
public:
    int primePalindrome(int N) {
        return *lower_bound(PP.begin(),PP.end(),N);
    }
private:
    const set<int> PP{
 0x00000002,0x00000003,0x00000005,0x00000007,0x0000000b,0x00000065,0x00000083,0x00000097,0x000000b5,0x000000bf,
 0x00000139,0x00000161,0x00000175,0x0000017f,0x000002d7,0x000002f5,0x00000313,0x0000031d,0x00000397,0x000003a1,
 0x0000283d,0x00002905,0x00002969,0x00002c2f,0x00002c93,0x00003085,0x000031b1,0x00003215,0x00003413,0x00003607,
 0x0000366b,0x00003805,0x00003995,0x00003c5b,0x00003cbf,0x00003ebd,0x00003fe9,0x000040b1,0x00004115,0x0000443f,
 0x00004633,0x00004705,0x00004831,0x00004bbf,0x00004db3,0x00004e17,0x00007597,0x000075fb,0x000076c3,0x000077ef,
 0x00007853,0x00007925,0x00007b19,0x00007e43,0x00007ea7,0x000082fd,0x000086ef,0x0000881b,0x000088ed,0x00008951,
 0x00008a19,0x00008ba9,0x00008da7,0x00008ed3,0x00009199,0x000092c5,0x000094c3,0x00009527,0x0000977f,0x0000997d,
 0x0001123f,0x0001136b,0x000113cf,0x00011695,0x000118ed,0x00011a23,0x00011c17,0x00011d4d,0x00011e15,0x00011fa5,
 0x0001213f,0x000123fb,0x00012725,0x00012a4f,0x00012b7b,0x00012e41,0x00012ea5,0x00013099,0x00013297,0x000133c3,
 0x00013427,0x00013625,0x00013751,0x0001387d,0x00016255,0x0001638b,0x00016bd3,0x00016c37,0x00016e2b,0x00016f61,
 0x0001708d,0x000171b9,0x00017281,0x000172e5,0x000176d7,0x0001780d,0x000178d5,0x00017a01,0x00017c63,0x00017d2b,
 0x00017e57,0x00018055,0x00018181,0x000f4df9,0x000f6181,0x000f98f9,0x000fb069,0x000fcc25,0x000febc9,0x00101b0d,
 0x001036c9,0x00104281,0x0010660d,0x001085b1,0x00109169,0x0010ad25,0x0010b10d,0x0010ffff,0x00110bb7,0x001117d3,
 0x0011238b,0x00112f43,0x00113afb,0x00114ee7,0x00117a43,0x00118e2f,0x001199e7,0x0011b5a3,0x0011c15b,0x0011f09f,
 0x0011f86f,0x0011fc57,0x0012048b,0x00121043,0x00121bfb,0x00122bff,0x001237b7,0x0012436f,0x0012537d,0x00126ed5,
 0x00127ed9,0x00128a91,0x00129649,0x0012a265,0x0012d979,0x0012f535,0x0012f91d,0x001300ed,0x001314d9,0x00132091,
 0x00133031,0x0013441d,0x00135b8d,0x00136f79,0x00137b31,0x00138301,0x00138b35,0x00138f1d,0x0013a2a5,0x0013a68d,
 0x0013d63f,0x0013e1f7,0x0014019b,0x0014190b,0x0014407f,0x00144467,0x00145853,0x00146023,0x00146bdb,0x00147fc7,
 0x0014c2f7,0x0014cac7,0x0014ceaf,0x0014ee53,0x0014fa0b,0x00153953,0x00157841,0x00158011,0x00158845,0x00158c2d,
 0x0015b3a1,0x0015ee9d,0x00160a59,0x00161611,0x001629fd,0x0016399d,0x00164d89,0x00165559,0x00165941,0x00166cc9,
 0x0016aff9,0x0016bbb1,0x0016bffd,0x0016d76d,0x001702d3,0x001716bf,0x0017327b,0x001761bf,0x00176d77,0x00178933,
 0x0017a0a3,0x0017a8d7,0x0017acbf,0x0017c047,0x0017c42f,0x0017e3d3,0x0017ff8f,0x00181ae7,0x00181f33,0x00182aeb,
 0x0018425b,0x00185647,0x001861ff,0x001865e7,0x00186a3d,0x00188d65,0x00189599,0x0018a921,0x0018d865,0x0018e099,
 0x0018ec51,0x0019080d,0x001913c5,0x00191f7d,0x00193f21,0x00194ad9,0x00194ec1,0x001956f5,0x00197e69,0x0019b57d,
 0x0019b965,0x0019c51d,0x0019e0d9,0x0019fc9f,0x001a0c3f,0x001a202b,0x001a27fb,0x001a6743,0x001a76e3,0x001a829b,
 0x001aadf7,0x001ac9b3,0x001ae187,0x001aed3f,0x001b206b,0x001b5fb3,0x001b7f61,0x001b8b19,0x001bc679,0x001bd231,
 0x001bd619,0x001bdde9,0x001be9a1,0x001bf1d5,0x001bf5bd,0x001c1d31,0x001c40bd,0x001c488d,0x001c5445,0x001c77d1,
 0x001ca32d,0x001caafd,0x001caee5,0x001cb331,0x001cb719,0x001cbee9,0x001cc2d1,0x001cee2d,0x001d09f3,0x001d1d7b,
 0x001d2163,0x001d4107,0x001d5cc3,0x001d7497,0x001d8c07,0x001d9ff3,0x001dc767,0x001dcb4f,0x001dded7,0x001de2bf,
 0x001df6ab,0x001e0a33,0x001e0e1b,0x001e1267,0x001e29d7,0x001e3dc3,0x001e41ab,0x001e497b,0x001e5533,0x001e591b,
 0x001e6d07,0x001e74d7,0x001e808f,0x002dcaab,0x002dce93,0x002de21b,0x002e05a7,0x002e2d1b,0x002ec31b,0x002ec703,
 0x002ee2bf,0x002ee6a7,0x002eee77,0x002f0e1b,0x002f258b,0x002f2dbf,0x002f3d5f,0x002f5925,0x002f64dd,0x002fb7ad,
 0x002fd751,0x002feb3d,0x00302639,0x003031f1,0x00303a25,0x00305195,0x00308cf5,0x0030a465,0x0030bc39,0x0030c7f1,
 0x0030cfc1,0x0030ff73,0x0031035b,0x00311acb,0x00312acf,0x00312eb7,0x0031423f,0x0031562b,0x003161e3,0x003175cf,
 0x0031856f,0x0031a12b,0x0031b0cb,0x0031b89b,0x0031c0cf,0x0031dc27,0x0031f013,0x00321b6f,0x0032233f,0x00322727,
 0x00322ef7,0x00323b13,0x003242e3,0x00326a61,0x00326e49,0x00327619,0x00328235,0x003295bd,0x0032a55d,0x0032ad91,
 0x0032ccd1,0x0032d505,0x0032ec75,0x00330449,0x00332bbd,0x00334f49,0x00335719,0x00335b01,0x003366b9,0x00339661,
 0x0033c1bd,0x0033c5a5,0x0033e16b,0x00340cc7,0x00342437,0x00343ff3,0x003443db,0x00344bab,0x00347aef,0x00348323,
 0x00348af3,0x00348edb,0x00349a93,0x0034a263,0x0034ae7f,0x0034ce23,0x0034e593,0x0034f597,0x003518bf,0x00353093,
 0x00353863,0x003573cd,0x0035a311,0x0035aae1,0x0035d63d,0x003609cd,0x00363911,0x00364c99,0x00366085,0x003677f5,
 0x0036bb25,0x0036c6dd,0x0036cb29,0x0036cf11,0x0036dac9,0x0036f2a7,0x00370a17,0x00373573,0x0037418f,0x003758ff,
 0x003778a3,0x00379847,0x0037a3ff,0x003802eb,0x00380ea3,0x00382a5f,0x00384d87,0x00387113,0x003894a9,0x00389891,
 0x0038b44d,0x0038b835,0x0038c839,0x0038cc21,0x0038e391,0x0038f395,0x00391ef1,0x00392aa9,0x003969f1,0x00396dd9,
 0x003975a9,0x00398161,0x00398549,0x0039954d,0x00399935,0x0039b4f1,0x0039c0a9,0x0039e04d,0x0039e435,0x0039fba5,
 0x003a0bb3,0x003a1383,0x003a2b57,0x003a3327,0x003a626b,0x003a6e23,0x003a89df,0x003aa1b3,0x003acd0f,0x003ae097,
 0x003af483,0x003af86b,0x003b0423,0x003b0bf3,0x003b1427,0x003b2f7f,0x003b6adf,0x003b824f,0x003bb5e9,0x003bc1a1,
 0x003bc971,0x003be145,0x003becfd,0x003bfd01,0x003c1859,0x003c285d,0x003c37fd,0x003c3fcd,0x003c7f15,0x003c96e9,
 0x003cca15,0x003ce9b9,0x003cf571,0x003d0129,0x003d0511,0x006b06db,0x006b59ab,0x006b5d93,0x006b717f,0x006b8507,
 0x006bb063,0x006bd007,0x006bdfa7,0x006befab,0x006c071b,0x006c1337,0x006c1b07,0x006c26bf,0x006c3e93,0x006c4a4b,
 0x006c5671,0x006c8d85,0x006c916d,0x006c9d25,0x006cc881,0x006cdc6d,0x006ce43d,0x006cf829,0x006d07c9,0x006d2f3d,
 0x006d3325,0x006d3af5,0x006d3edd,0x006d85f5,0x006db985,0x006dc925,0x006e1817,0x006e4373,0x006e925b,0x006e9e13,
 0x006ea25f,0x006eb9cf,0x006ebdb7,0x006ecdbb,0x006ee52b,0x006f08b7,0x006f1087,0x006f4417,0x006f63c5,0x006f6b95,
 0x006f8b39,0x006f9ad9,0x006fc24d,0x006fce05,0x00701ced,0x007030d9,0x007038a9,0x0070584d,0x00706405,0x0070a34d,
 0x0070bea5,0x0070cea9,0x0070ee57,0x0070f627,0x00710d97,0x0071256b,0x0071706b,0x0071783b,0x007183f3,0x0071b783,
 0x0071db0f,0x0071ee97,0x0072066b,0x00721223,0x00723997,0x00723d7f,0x00724937,0x0072593b,0x00728c71,0x00729059,
 0x0072b7cd,0x0072bbb5,0x0072c3e9,0x0072db59,0x00730ee9,0x007365a1,0x00736d71,0x00739cb5,0x0073c429,0x0073dbfd,
 0x0073e3cd,0x0073f7c3,0x0074231f,0x0074425f,0x00744e7b,0x00746e1f,0x007475ef,0x0074a533,0x0074cca7,0x0074ec4b,
 0x0074f803,0x0074fbeb,0x007503bb,0x007507a3,0x00751b8f,0x0075374b,0x00755ad7,0x0075668f,0x00757247,0x0075b969,
 0x0075c521,0x0075d525,0x0075f07d,0x00760081,0x0076240d,0x00763795,0x007643b1,0x007662f1,0x00767ac5,0x00769a69,
 0x0076a239,0x0076b1d9,0x0076c1dd,0x0076c5c5,0x0076e569,0x0076f121,0x0077206f,0x00774fb3,0x007753ff,0x007757e7,
 0x00777f5b,0x00778343,0x00779ab3,0x0077ae9f,0x0077ca5b,0x0077e1cb,0x00780557,0x00780d27,0x0078110f,0x007824fb,
 0x00785057,0x00786c13,0x00788383,0x0078beed,0x0078caa5,0x0079021d,0x00790dd5,0x007915a5,0x0079215d,0x00792d79,
 0x00793549,0x00794cb9,0x00796c5d,0x00797045,0x00797879,0x0079bb45,0x0079d701,0x0079dae9,0x0079e2b9,0x007a0645,
 0x00895c19,0x00898f45,0x0089b2d1,0x0089e5fd,0x0089f9e9,0x0089fdd1,0x008a05a1,0x008a0989,0x008a1541,0x008a5c59,
 0x008a742d,0x008a7fe5,0x008a87b5,0x008abb45,0x008acae5,0x008ae6ab,0x008afe1b,0x008b0267,0x008b4533,0x008b491b,
 0x008b68bf,0x008b9beb,0x008bead3,0x008bfad7,0x008bfebf,0x008c1247,0x008c2a1b,0x008c5577,0x008c612f,0x008c619d,
 0x008c84c5,0x008c90e1,0x008ca469,0x008cb855,0x008cbc3d,0x008cd7f9,0x008cdbe1,0x008d3a69,0x008d717d,0x008d79b1,
 0x008d9121,0x008d9d3d,0x008db4ad,0x008dc065,0x008e2efb,0x008e372f,0x008e46cf,0x008e5a57,0x008e6673,0x008e7de3,
 0x008eb173,0x008ec8e3,0x008f0ffb,0x008f3387,0x008f66b3,0x008f6ef1,0x008fa605,0x008fb98d,0x008ff105,0x00900875,
 0x00900cc1,0x00902431,0x0090381d,0x0090831d,0x00909e75,0x0090d9d5,0x0090ddbd,0x0090e58d,0x0091053b,0x00912caf,
 0x00915bf3,0x009167ab,0x0091aec3,0x0091d24f,0x0091da1f,0x0091e63b,0x0092251f,0x00923cf3,0x009244c3,0x009248ab,
 0x0092802d,0x00928415,0x00928be5,0x0092a3b9,0x0092cb2d,0x0092dacd,0x0092e29d,0x0092fa71,0x00930241,0x00932d9d,
 0x00934189,0x00935ce1,0x00939071,0x0093cf55,0x009402ef,0x00942617,0x00942e4b,0x00943a03,0x00946177,0x00946d2f,
 0x0094811b,0x00948503,0x0094ac77,0x0094c3e7,0x0094d003,0x0094d7d3,0x0094e773,0x0094f777,0x0095171b,0x00952e8b,
 0x00953a43,0x00954277,0x0095465f,0x009559e7,0x00955dcf,0x0095798b,0x00958d81,0x0095a4f1,0x0095acc1,0x0095cc65,
 0x0095d04d,0x0095d881,0x0095e051,0x00961765,0x00961b4d,0x00963af1,0x009656ad,0x0096a1ad,0x0096e479,0x0096e861,
 0x0097041d,0x00971813,0x00972b9b,0x00972f83,0x00974f27,0x009756f7,0x00975adf,0x00976313,0x00976ae3,0x0097769b,
 0x00977a83,0x00978a87,0x00978e6f,0x00979a27,0x0097a5df,0x0097f0df,0x00981083,0x009843af,0x00984be3,0x00984fcb,
 0x00986f0b,0x05f65631,};
};
*/


int main(int argc, const char * argv[]) {
    
    
    Solution s;
//    cout << "2==" << s.primePalindrome(1) << endl;
//    cout << "2==" << s.primePalindrome(2) << endl;
//    cout << "3==" << s.primePalindrome(3) << endl;
//    cout << "5==" << s.primePalindrome(4) << endl;
//    cout << "7==" << s.primePalindrome(6) << endl;
//    cout << "11==" << s.primePalindrome(8) << endl;
//    cout << "11==" << s.primePalindrome(9) << endl;
//    cout << "11==" << s.primePalindrome(10) << endl;
//    cout << "11==" << s.primePalindrome(11) << endl;
//    cout << "101==" << s.primePalindrome(12) << endl;
//    cout << "131==" << s.primePalindrome(102) << endl;
    auto r=s.primePalindrome(pow(10,8));
    cout << endl << endl << dec << "dec: " << r << endl;
    cout << endl << endl << hex << "hex: " << r << endl;
    
    return 0;
}
